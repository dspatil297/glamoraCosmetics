{% comment %} Glamora Product page — gallery, details, form, trust {% endcomment %}
<div class="product-page shopify-section">
  <div class="product-page__layout">
    <div class="product-page__gallery">
      {% if product.featured_media %}
        <div class="product-page__main-img">
          {{ product.featured_media | image_url: width: 800 | image_tag: loading: 'eager', alt: product.featured_media.alt | escape }}
        </div>
        {% if product.media.size > 1 %}
          <div class="product-page__thumbs">
            {% for media in product.media limit: 4 %}
              {{ media | image_url: width: 120, height: 120, crop: 'center' | image_tag: loading: 'lazy', class: 'product-page__thumb', alt: product.title | escape }}
            {% endfor %}
          </div>
        {% endif %}
      {% else %}
        <div class="product-page__placeholder" style="background-image: url('https://images.unsplash.com/photo-1556228578-0d85b1a4d571?w=800&h=800&fit=crop&auto=format'); background-size: cover; background-position: center;"></div>
      {% endif %}
    </div>
    <div class="product-page__details">
      <nav class="product-page__breadcrumb" aria-label="Breadcrumb">
        <a href="{{ routes.root_url }}">Home</a>
        <span>/</span>
        <a href="{{ routes.all_products_collection_url }}">Shop</a>
        <span>/</span>
        <span>{{ product.title }}</span>
      </nav>
      <h1 class="product-page__title">{{ product.title }}</h1>
      <p class="product-page__price">{{ product.price | money }}</p>
      <div class="product-page__desc rte">{{ product.description }}</div>

      {% form 'product', product, class: 'product-form' %}
        {% if product.variants.size > 1 %}
          <label for="product-variant">Variant</label>
          <select name="id" id="product-variant" class="product-form__select">
            {% for variant in product.variants %}
              <option value="{{ variant.id }}" {% if variant == product.selected_or_first_available_variant %}selected{% endif %} {% unless variant.available %}disabled{% endunless %}>
                {{ variant.title }} — {{ variant.price | money }}
              </option>
            {% endfor %}
          </select>
        {% else %}
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
        {% endif %}
        <label for="quantity">Quantity</label>
        <input type="number" id="quantity" name="quantity" min="1" value="1" class="product-form__input">
        <button type="submit" name="add" class="btn btn--primary product-form__submit">ADD TO CART</button>
        {{ form | payment_button }}
      {% endform %}

      <p class="product-page__shipping">Free shipping on orders above ₹999</p>
      {% render 'trust-badges' %}
    </div>
  </div>
</div>

{% stylesheet %}
  .product-page { 
    padding: var(--section-padding-block-mobile) clamp(1rem, 4vw, var(--page-margin)); 
    max-width: var(--page-width); 
    margin: 0 auto; 
  }
  @media (min-width: 769px) {
    .product-page { padding: var(--section-padding-block-desktop) clamp(1rem, 4vw, var(--page-margin)); }
  }
  .product-page__layout { 
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: clamp(1.5rem, 3vw, 2rem); 
    align-items: start; 
  }
  .product-page__main-img { 
    margin-bottom: var(--spacing-sm); 
    border-radius: var(--style-border-radius-cards); 
    overflow: hidden; 
  }
  .product-page__main-img img { width: 100%; height: auto; }
  .product-page__thumbs { 
    display: flex; 
    gap: var(--spacing-xs); 
    margin-top: var(--spacing-sm);
  }
  .product-page__thumb { 
    width: 80px; 
    height: 80px; 
    object-fit: cover; 
    border-radius: 8px; 
    cursor: pointer; 
  }
  .product-page__placeholder { width: 100%; aspect-ratio: 1; }
  .product-page__breadcrumb { 
    font-size: 0.8125rem; 
    color: var(--color-text-muted); 
    margin-bottom: var(--spacing-xs); 
  }
  .product-page__breadcrumb a { color: var(--color-text-muted); }
  .product-page__title { 
    font-family: var(--font-heading); 
    font-size: clamp(1.5rem, 2.5vw, 2rem); 
    margin: 0 0 var(--spacing-xs); 
  }
  .product-page__price { 
    font-size: clamp(1.25rem, 2vw, 1.5rem); 
    font-weight: 700; 
    margin: 0 0 var(--spacing-md); 
  }
  .product-page__desc { 
    margin-bottom: var(--spacing-lg); 
    line-height: 1.7; 
  }
  .product-form label { 
    display: block; 
    font-size: 0.875rem; 
    margin: var(--spacing-xs) 0 0.25rem; 
    font-weight: 600;
  }
  .product-form__select, .product-form__input { 
    width: 100%; 
    max-width: 12rem; 
    padding: 0.75rem; 
    margin-bottom: var(--spacing-xs); 
    border: 2px solid var(--color-border); 
    border-radius: var(--style-border-radius-inputs); 
    font-size: 1rem;
  }
  .product-form__submit { 
    width: 100%; 
    max-width: 20rem; 
    margin: var(--spacing-lg) 0 var(--spacing-md); 
    padding: 1rem 1.5rem;
  }
  .product-page__shipping { 
    font-size: 0.875rem; 
    color: var(--color-text-muted); 
    margin: var(--spacing-md) 0 var(--spacing-xs); 
  }
  @media (max-width: 768px) { 
    .product-page__layout { 
      grid-template-columns: 1fr; 
      gap: var(--spacing-lg);
    }
    .product-form__select, .product-form__input { 
      max-width: 100%; 
    }
    .product-form__submit { 
      max-width: 100%; 
    }
    .product-page__thumbs { 
      overflow-x: auto;
      padding-bottom: var(--spacing-xs);
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Product",
  "tag": "section",
  "class": "section-product",
  "settings": [],
  "disabled_on": { "groups": ["header", "footer"] }
}
{% endschema %}
