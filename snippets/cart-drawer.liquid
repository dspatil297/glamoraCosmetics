<div class="cart-drawer" id="cart-drawer" aria-hidden="true">
  <div class="cart-drawer__overlay" id="cart-drawer-overlay"></div>
  <div class="cart-drawer__panel">
    <div class="cart-drawer__header">
      <h2 class="cart-drawer__title">Your cart</h2>
      <button type="button" class="cart-drawer__close" id="cart-drawer-close" aria-label="Close">&times;</button>
    </div>
    <div class="cart-drawer__content">
      {% if cart.item_count > 0 %}
        <p class="cart-drawer__count">{{ cart.item_count }} {{ cart.item_count | pluralize: 'item', 'items' }}</p>
        <a href="{{ routes.cart_url }}" class="btn btn--primary cart-drawer__view">View cart</a>
        <a href="{{ routes.cart_url }}/checkout" class="btn btn--secondary cart-drawer__checkout">Checkout</a>
      {% else %}
        <p class="cart-drawer__empty">Your cart is empty</p>
        <a href="{{ routes.all_products_collection_url }}" class="btn btn--primary">Continue shopping</a>
      {% endif %}
    </div>
  </div>
</div>
<style>
  .cart-drawer { position: fixed; inset: 0; z-index: 999; pointer-events: none; }
  .cart-drawer.is-open { pointer-events: auto; }
  .cart-drawer__overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.3); opacity: 0; transition: opacity 0.3s; }
  .cart-drawer.is-open .cart-drawer__overlay { opacity: 1; }
  .cart-drawer__panel { position: absolute; top: 0; right: 0; width: 360px; max-width: 100%; height: 100%; background: var(--color-background); box-shadow: -4px 0 20px rgba(0,0,0,0.1); transform: translateX(100%); transition: transform 0.3s; padding: 1.5rem; }
  .cart-drawer.is-open .cart-drawer__panel { transform: translateX(0); }
  .cart-drawer__header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
  .cart-drawer__title { font-family: var(--font-heading); font-size: 1.25rem; margin: 0; }
  .cart-drawer__close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--color-foreground); }
  .cart-drawer__content { display: flex; flex-direction: column; gap: 0.75rem; }
  .cart-drawer__count { margin: 0; font-size: 0.875rem; color: var(--color-text-muted); }
  .cart-drawer__empty { margin: 0 0 0.5rem; }
</style>
<script>
  (function() {
    var link = document.getElementById('header-cart-link');
    var drawer = document.getElementById('cart-drawer');
    var overlay = document.getElementById('cart-drawer-overlay');
    var closeBtn = document.getElementById('cart-drawer-close');
    if (!link || !drawer) return;
    function open(e) { e.preventDefault(); drawer.classList.add('is-open'); drawer.setAttribute('aria-hidden', 'false'); }
    function close() { drawer.classList.remove('is-open'); drawer.setAttribute('aria-hidden', 'true'); }
    link.addEventListener('click', open);
    closeBtn && closeBtn.addEventListener('click', close);
    overlay && overlay.addEventListener('click', close);
  })();
</script>
